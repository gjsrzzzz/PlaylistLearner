

<div style="@AspectStyle(Item.Format)">
    <iframe frameborder="0" style="width:100%;height:100%;position:absolute;left:0px;top:0px;" allow="autoplay"
            src="@Embed(Item.Link)">
    </iframe>
</div>

@code {
    [Parameter]
    public PlaylistItem Item { get; set; }
 
    string AspectStyle(Format format)
    {
        var style = format switch
        {
            Format.Default => "position:relative;padding-bottom:56.25%;",
            Format.Mobile => "position:relative;padding-bottom:176.33%;",
            _ => throw new ArgumentOutOfRangeException(nameof(format), format, null)
            };
        return style;
    }
    
    
    string Embed(string link)
    {
        link = link.Trim();
        link = link.Contains("watch") ? link.Replace("/watch?v=", "/embed/") : 
            link.Replace("https://youtu.be/", "https://www.youtube.com/embed/");
        link += "?autoplay=1";
        return link;
    }
}